import{r as c,j as e,R as J}from"./remotion-BFvNeB2s.js";import{a as ie,g as ne}from"./react-N--QU9DW.js";import"@remotion/compositor-linux-arm64-gnu";import"@remotion/compositor-linux-arm64-musl";import"@remotion/compositor-linux-x64-gnu";import"@remotion/compositor-linux-x64-musl";import"@remotion/compositor-darwin-arm64";import"@remotion/compositor-darwin-x64";(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))j(o);new MutationObserver(o=>{for(const x of o)if(x.type==="childList")for(const N of x.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&j(N)}).observe(document,{childList:!0,subtree:!0});function l(o){const x={};return o.integrity&&(x.integrity=o.integrity),o.referrerPolicy&&(x.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?x.credentials="include":o.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function j(o){if(o.ep)return;o.ep=!0;const x=l(o);fetch(o.href,x)}})();var I={},G;function le(){if(G)return I;G=1;var s=ie();return I.createRoot=s.createRoot,I.hydrateRoot=s.hydrateRoot,I}var oe=le();const ce=ne(oe);var de={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const me=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),p=(s,f)=>{const l=c.forwardRef(({color:j="currentColor",size:o=24,strokeWidth:x=2,absoluteStrokeWidth:N,children:C,...P},A)=>c.createElement("svg",{ref:A,...de,width:o,height:o,stroke:j,strokeWidth:N?Number(x)*24/Number(o):x,className:`lucide lucide-${me(s)}`,...P},[...f.map(([y,w])=>c.createElement(y,w)),...(Array.isArray(C)?C:[C])||[]]));return l.displayName=`${s}`,l},xe=p("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),pe=p("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),ue=p("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),he=p("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ge=p("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]),be=p("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),B=p("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),fe=p("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),_=p("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),ye=p("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),je=p("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),ve=p("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Ne=p("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),we=p("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),ke=p("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Se=p("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Ce=p("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Pe=p("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Ae=p("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),Me=p("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),De=p("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),q=p("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Te=p("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),H=p("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fe=p("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),$e=({result:s,onClose:f,onFeedback:l})=>{const[j,o]=c.useState(!1),[x,N]=c.useState(!1),[C,P]=c.useState(!1),[A,y]=c.useState(""),[w,u]=c.useState(null),[M,T]=c.useState(!1),[v,F]=c.useState(null),d=()=>{const a=document.createElement("a");a.href=s.videoUrl,a.download=`${s.projectId}.mp4`,document.body.appendChild(a),a.click(),document.body.removeChild(a)},b=async a=>{if(l){if(u(a),a==="bad"){P(!0);return}await n(a)}},n=async a=>{if(l){N(!0);try{await l(s.projectId,a,A||void 0),o(!0),P(!1)}catch(r){console.error("Failed to submit feedback:",r),alert("Failed to submit feedback. Please try again.")}finally{N(!1)}}},h=async()=>{w&&await n(w)};return e.jsx("div",{className:"results-preview-overlay",onClick:f,children:e.jsxs("div",{className:"results-preview-modal",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"results-preview-header",children:[e.jsx("h2",{children:"ðŸŽ‰ Your Video is Ready!"}),e.jsx("button",{className:"close-button",onClick:f,"aria-label":"Close",children:"âœ•"})]}),e.jsx("div",{className:"video-player-container",children:e.jsx("video",{controls:!0,autoPlay:!0,className:"video-player",src:s.videoUrl,"aria-label":"Generated video preview",children:"Your browser does not support the video tag."})}),s.metadata&&e.jsxs("div",{className:"video-metadata",children:[s.metadata.duration&&e.jsxs("span",{className:"metadata-item",children:["â±ï¸ ",Math.round(s.metadata.duration),"s"]}),s.metadata.resolution&&e.jsxs("span",{className:"metadata-item",children:["ðŸ“ ",s.metadata.resolution]}),s.metadata.platform&&e.jsxs("span",{className:"metadata-item",children:["ðŸ“± ",s.metadata.platform]}),s.metadata.fileSize&&e.jsxs("span",{className:"metadata-item",children:["ðŸ’¾ ",(s.metadata.fileSize/1024/1024).toFixed(2)," MB"]})]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"download-button",onClick:d,children:"ðŸ“¥ Download Video"}),e.jsx("a",{href:s.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"share-button",children:"ðŸ”— Open in New Tab"}),e.jsx("button",{onClick:async()=>{if(!M){T(!0),F(null);try{const r=await(await fetch("/.netlify/functions/publish-x",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:`Check out my new AI video! ðŸŽ¥âœ¨ #${s.projectId} #SirTravStudio`})})).json();r.success?F({success:!0,message:"Posted to X!"}):r.disabled||r.error?.includes("Auth")||r.error?.includes("401")?F({success:!1,message:"Auth Error: Check Netlify Keys"}):F({success:!1,message:"Failed to post"})}catch{F({success:!1,message:"Network Error"})}finally{T(!1)}}},className:`x-publish-button ${M?"loading":""} ${v?.success?"success":""} ${v?.success===!1?"error":""}`,disabled:M||v?.success,style:{background:v?.success?"#10B981":v?.success===!1?"#EF4444":"#000000",color:"white",border:"1px solid #333",borderRadius:"8px",padding:"10px 20px",marginTop:"10px",cursor:M||v?.success?"default":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:"100%",fontWeight:"bold",transition:"all 0.3s ease"},children:M?e.jsx("span",{children:"â³ Posting..."}):v?.success?e.jsx("span",{children:"âœ… Posted to X!"}):v?.success===!1?e.jsxs("span",{children:["âŒ ",v.message]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"ðŸ¦"})," Post to X"]})})]}),!j&&l&&e.jsxs("div",{className:"feedback-section",children:[e.jsx("h3",{children:"How did we do?"}),e.jsx("p",{className:"feedback-description",children:"Your feedback helps the AI learn your preferences for future videos."}),e.jsxs("div",{className:"feedback-buttons",children:[e.jsx("button",{className:`feedback-button thumbs-up ${w==="good"?"selected":""}`,onClick:()=>b("good"),disabled:x,"aria-label":"Good video",children:"ðŸ‘ Keep It (Good)"}),e.jsx("button",{className:`feedback-button thumbs-down ${w==="bad"?"selected":""}`,onClick:()=>b("bad"),disabled:x,"aria-label":"Bad video",children:"ðŸ‘Ž Discard (Bad)"})]}),C&&e.jsxs("div",{className:"feedback-comments",children:[e.jsx("label",{htmlFor:"feedback-comments-input",children:"What could be improved? (optional)"}),e.jsx("textarea",{id:"feedback-comments-input",value:A,onChange:a=>y(a.target.value),placeholder:"e.g., 'Too fast pacing', 'Music too loud', 'Wrong mood'...",rows:4,disabled:x}),e.jsxs("div",{className:"comment-actions",children:[e.jsx("button",{onClick:()=>{P(!1),u(null),y("")},disabled:x,className:"cancel-button",children:"Cancel"}),e.jsx("button",{onClick:h,disabled:x,className:"submit-button",children:x?"Submitting...":"Submit Feedback"})]})]})]}),j&&e.jsxs("div",{className:"feedback-success",children:[e.jsx("div",{className:"success-icon",children:"âœ…"}),e.jsx("h3",{children:"Thank you for your feedback!"}),e.jsx("p",{children:"The AI will learn from your preferences to make even better videos next time."})]}),s.credits&&e.jsxs("div",{className:"credits-section",children:[e.jsx("h4",{children:"Credits"}),e.jsxs("div",{className:"credits-content",children:[s.credits.music&&e.jsxs("p",{children:["ðŸŽµ Music by ",s.credits.music]}),s.credits.voice&&e.jsxs("p",{children:["ðŸŽ™ï¸ Voice by ",s.credits.voice]}),s.credits.platform&&e.jsxs("p",{children:["ðŸ¤– Generated with ",s.credits.platform]}),e.jsx("p",{className:"commons-good-notice",children:"For the Commons Good - Open Access Content Creation"})]})]})]})})},$=[{id:"director",name:"Director",icon:"ðŸŽ¬",description:"Curates media & sets direction"},{id:"writer",name:"Writer",icon:"âœï¸",description:"Generates narrative script"},{id:"voice",name:"Voice",icon:"ðŸŽ™ï¸",description:"Synthesizes narration"},{id:"composer",name:"Composer",icon:"ðŸŽµ",description:"Creates soundtrack"},{id:"editor",name:"Editor",icon:"ðŸŽžï¸",description:"Assembles final video"},{id:"attribution",name:"Attribution",icon:"ðŸ“œ",description:"Compiles credits"},{id:"publisher",name:"Publisher",icon:"ðŸš€",description:"Uploads to storage"}];function Ee({projectId:s,runId:f,onComplete:l,onError:j}){const[o,x]=c.useState([]),[N,C]=c.useState("connecting"),P=c.useRef(null),A=c.useRef(null);c.useEffect(()=>{if(!s)return;const d=()=>{const n=`/.netlify/functions/progress?projectId=${s}&runId=${f||""}&stream=true`;try{const h=new EventSource(n);P.current=h,h.onopen=()=>{C("connected"),console.log("[PipelineProgress] SSE connected")},h.addEventListener("connected",a=>{console.log("[PipelineProgress] Connection established:",a.data),C("connected")}),h.addEventListener("progress",a=>{try{const r=JSON.parse(a.data);x(k=>k.find(g=>g.timestamp===r.timestamp&&g.agent===r.agent&&g.status===r.status)?k:[...k,r])}catch(r){console.error("[PipelineProgress] Parse error:",r)}}),h.addEventListener("complete",a=>{try{const r=JSON.parse(a.data);l?.(r),h.close()}catch(r){console.error("[PipelineProgress] Parse error on complete:",r)}}),h.addEventListener("error",a=>{try{const r=JSON.parse(a.data);j?.(r.message||"Pipeline failed"),h.close()}catch{}}),h.onerror=a=>{console.warn("[PipelineProgress] SSE network error, falling back to polling",a),h.close(),b()}}catch{console.warn("[PipelineProgress] SSE not available, using polling"),b()}},b=()=>{C("connected");let n=0,h=0;const a=async()=>{try{const k=await fetch(`/.netlify/functions/progress?projectId=${s}${f?`&runId=${f}`:""}`);if(k.ok){const g=await k.json();if(g.events&&Array.isArray(g.events)){g.events.length===h?n++:(n=0,h=g.events.length),x(g.events);const D=g.events[g.events.length-1];if(D?.status==="completed"&&D?.agent==="publisher"){A.current&&clearTimeout(A.current);return}}}}catch(k){console.error("[PipelineProgress] Poll error:",k)}const r=n>20?1e4:n>10?5e3:2e3;A.current=setTimeout(a,r)};a()};return d(),()=>{P.current&&P.current.close(),A.current&&clearInterval(A.current)}},[s,l,j]);const y=J.useMemo(()=>{if(o.length===0)return null;const d=new Map;$.forEach(a=>d.set(a.id,{name:a.id,status:"pending"}));let b="started",n;return o.forEach(a=>{let r=[a.agent];a.agent==="production_parallel"?r=["voice","composer"]:a.agent==="completed"?r=["publisher"]:(a.agent==="pipeline"||a.agent==="quality_gate")&&(r=[]),r.forEach(k=>{const g=d.get(k);if(g){let D=a.status;if(D==="started"&&(D="running"),g.status==="completed"&&D==="running")return;d.set(k,{...g,status:D,error:a.status==="failed"?a.message:void 0})}}),a.status==="failed"&&(b="failed",n=a.message)}),$.every(a=>{const r=d.get(a.id)?.status;return r==="completed"||r==="fallback"})&&b!=="failed"&&(b="completed"),{projectId:s,status:b,steps:Array.from(d.values()),error:n}},[o,s]);c.useEffect(()=>{y?.status==="completed"?l?.(y):y?.status==="failed"&&j?.(y.error||"Pipeline failed")},[y?.status]);const w=y?.steps?.filter(d=>d.status==="completed"||d.status==="fallback").length||0,u=$.length,M=Math.round(w/u*100),T=d=>y?.steps?.find(b=>b.name===d)||{name:d,status:"pending"},v=d=>{switch(d){case"completed":return"bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.3)]";case"running":return"bg-blue-500 animate-pulse shadow-[0_0_10px_rgba(59,130,246,0.3)]";case"failed":return"bg-red-500 shadow-[0_0_10px_rgba(239,68,68,0.3)]";case"fallback":return"bg-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.3)]";default:return"bg-zinc-700"}},F=d=>{switch(d){case"completed":return"âœ…";case"running":return"â³";case"failed":return"âŒ";case"fallback":return"âš ï¸";default:return"â¸ï¸"}};return e.jsxs("div",{className:"bg-[var(--color-bg-secondary)] rounded-xl border border-[var(--color-border)] p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-[var(--color-text-primary)]",children:"Pipeline Progress"}),e.jsxs("p",{className:"text-sm text-[var(--color-text-secondary)]",children:["Project: ",e.jsx("code",{className:"bg-[var(--color-bg-primary)] px-2 py-0.5 rounded",children:s})]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${N==="connected"?"bg-green-500/20 text-green-400":N==="error"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:N==="connected"?"â— Live":N==="error"?"â— Disconnected":"â— Connecting..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-[var(--color-text-secondary)]",children:"Overall Progress"}),e.jsxs("span",{className:"text-[var(--color-text-primary)] font-medium",children:[M,"%"]})]}),e.jsx("div",{className:"h-3 bg-[var(--color-bg-primary)] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500 ease-out",style:{width:`${M}%`}})})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:$.slice(0,4).map((d,b)=>{const n=T(d.id);return e.jsxs("div",{className:`p-4 rounded-lg border transition-all duration-300 ${n.status==="running"?"border-blue-500 bg-blue-500/10":n.status==="completed"?"border-green-500/50 bg-green-500/5":n.status==="failed"?"border-red-500/50 bg-red-500/5":"border-[var(--color-border)] bg-[var(--color-bg-primary)]"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:d.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-[var(--color-text-primary)]",children:d.name}),e.jsx("span",{className:"text-sm",children:F(n.status)})]}),e.jsxs("span",{className:"text-xs text-[var(--color-text-secondary)]",children:["Agent ",b+1]})]})]}),e.jsx("p",{className:"text-xs text-[var(--color-text-secondary)] mb-2",children:d.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${v(n.status)}`}),e.jsxs("span",{className:"text-xs capitalize text-[var(--color-text-secondary)]",children:[n.status,n.duration_ms&&` (${(n.duration_ms/1e3).toFixed(1)}s)`]})]}),n.error&&e.jsx("p",{className:"mt-2 text-xs text-red-400 bg-red-500/10 p-2 rounded",children:n.error})]},d.id)})}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mt-4 max-w-3xl mx-auto",children:$.slice(4).map((d,b)=>{const n=T(d.id);return e.jsxs("div",{className:`p-4 rounded-lg border transition-all duration-300 ${n.status==="running"?"border-blue-500 bg-blue-500/10":n.status==="completed"?"border-green-500/50 bg-green-500/5":n.status==="failed"?"border-red-500/50 bg-red-500/5":"border-[var(--color-border)] bg-[var(--color-bg-primary)]"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:d.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-[var(--color-text-primary)]",children:d.name}),e.jsx("span",{className:"text-sm",children:F(n.status)})]}),e.jsxs("span",{className:"text-xs text-[var(--color-text-secondary)]",children:["Agent ",b+5]})]})]}),e.jsx("p",{className:"text-xs text-[var(--color-text-secondary)] mb-2",children:d.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${v(n.status)}`}),e.jsxs("span",{className:"text-xs capitalize text-[var(--color-text-secondary)]",children:[n.status,n.duration_ms&&` (${(n.duration_ms/1e3).toFixed(1)}s)`]})]}),n.error&&e.jsx("p",{className:"mt-2 text-xs text-red-400 bg-red-500/10 p-2 rounded",children:n.error})]},d.id)})}),y?.status==="completed"&&e.jsxs("div",{className:"mt-6 p-4 bg-green-500/10 border border-green-500/30 rounded-lg text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸŽ‰"}),e.jsx("p",{className:"text-green-400 font-medium mt-2",children:"Pipeline completed successfully!"})]}),y?.status==="failed"&&e.jsxs("div",{className:"mt-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-center",children:[e.jsx("span",{className:"text-2xl",children:"âŒ"}),e.jsx("p",{className:"text-red-400 font-medium mt-2",children:"Pipeline failed"}),y.error&&e.jsx("p",{className:"text-red-300 text-sm mt-1",children:y.error})]})]})}const W="v2.0.0",Re="2025-12-21",X=[{id:"director",name:"Director Agent",icon:"ðŸŽ¬",description:"Reads memory, curates shots, sets theme/mood."},{id:"writer",name:"Writer Agent",icon:"âœï¸",description:"Drafts reflective first-person narrative script."},{id:"voice",name:"Voice Agent",icon:"ðŸŽ™ï¸",description:"Synthesizes narration (ElevenLabs)."},{id:"composer",name:"Composer Agent",icon:"ðŸŽµ",description:"Generates soundtrack & beat grid (Suno)."},{id:"editor",name:"Editor Agent",icon:"ðŸŽžï¸",description:"Assembles video, applies LUFS gates."},{id:"attribution",name:"Attribution Agent",icon:"ðŸ“œ",description:"Compiles credits for Commons Good."},{id:"publisher",name:"Publisher Agent",icon:"ðŸš€",description:"Uploads artifacts, updates memory vault."}];function Le(){const[s,f]=c.useState(`week${new Date().getWeekNumber()}_recap`),[l,j]=c.useState([]),[o,x]=c.useState("idle"),[N,C]=c.useState({}),[P,A]=c.useState({cost:0,time:0}),[y,w]=c.useState({}),[u,M]=c.useState(null),[T,v]=c.useState("private"),[F,d]=c.useState(!1),[b,n]=c.useState(!1),[h,a]=c.useState(null),[r,k]=c.useState("tiktok"),[g,D]=c.useState("manual"),[Ie,_e]=c.useState(null),[O,Y]=c.useState("friendly"),[E,K]=c.useState("short"),[R,L]=c.useState(null),Z=c.useCallback(t=>{t.preventDefault();const m=Array.from(t.dataTransfer?.files||[]);j(i=>[...i,...m])},[]),Q=t=>{const m=Array.from(t.target.files||[]);j(i=>[...i,...m])},ee=t=>{j(m=>m.filter((i,S)=>S!==t))},se=t=>new Promise((m,i)=>{const S=new FileReader;S.readAsDataURL(t),S.onload=()=>m(S.result.split(",")[1]),S.onerror=i}),te=async()=>{if(l.length===0)return;x("running");const t=`run-${Date.now()}`;a(t),A({cost:0,time:0}),X.forEach(m=>{C(i=>({...i,[m.id]:"pending"})),w(i=>({...i,[m.id]:[]}))});try{C(i=>({...i,director:"processing"})),w(i=>({...i,director:["> Uploading assets to backend..."]}));for(const i of l){const S=await se(i);if(!(await fetch("/.netlify/functions/intake-upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:s,filename:i.name,contentType:i.type,fileBase64:S})})).ok)throw new Error(`Upload failed for ${i.name}`);w(V=>({...V,director:[...V.director||[],`> Uploaded: ${i.name}`]}))}w(i=>({...i,director:[...i.director||[],"> Starting 7-agent pipeline..."]}));const m=await fetch("/.netlify/functions/start-pipeline",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer demo"},body:JSON.stringify({projectId:s,runId:t,platform:r,brief:{mood:"reflective",pace:E==="short"?"fast":"medium",story:`Weekly recap for ${s}`,cta:"Share your story",tone:r==="linkedin"||r==="twitter"?"professional":"casual",voiceStyle:O,videoLength:E},payload:{images:l.map(i=>({id:i.name,url:`uploads/${s}/${i.name}`})),projectMode:r==="linkedin"||r==="twitter"?"business_public":"commons_public",socialPlatform:r,outputObjective:r==="linkedin"||r==="twitter"?"social":"personal",musicMode:g,manualMusicFile:g==="manual"?l.find(i=>i.type.startsWith("audio/"))?.name:void 0,voiceStyle:O,videoLength:E}})});if(!m.ok){const i=await m.json().catch(()=>({}));throw new Error(i.error||"Pipeline start failed")}console.log("Pipeline started, listening via SSE...")}catch(m){console.error("Pipeline error:",m),x("error"),w(i=>({...i,director:[...i.director||[],`> ERROR: ${m.message}`]}))}},ae=t=>{x("completed");const m=t.artifacts?.videoUrl,i=m&&!m.startsWith("placeholder://")&&!m.startsWith("error://");M({runId:h,videoUrl:i?m:"/test-assets/test-video.mp4",thumbnailUrl:`https://picsum.photos/seed/${s}/640/360`,duration:t.artifacts?.duration?`${Math.floor(t.artifacts.duration/60)}:${String(t.artifacts.duration%60).padStart(2,"0")}`:"0:30",resolution:"1080p",fileSize:t.artifacts?.fileSize||"10.1 MB",creditsUrl:t.artifacts?.creditsUrl||"/test-assets/credits.json",generatedAt:new Date().toISOString(),pipelineMode:t.artifacts?.pipelineMode||"DEMO",pipelineMode:t.artifacts?.pipelineMode||"DEMO",isPlaceholder:!i,invoice:t.artifacts?.invoice})},re=t=>{x("error"),console.error("Pipeline failed:",t)},U=async t=>{if(h)try{if((await fetch("/.netlify/functions/submit-evaluation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:s,runId:h,rating:t,timestamp:new Date().toISOString()})})).ok)L({message:`Feedback Received: ${t==="good"?"ðŸ‘":"ðŸ‘Ž"}`,type:"success"}),setTimeout(()=>L(null),3e3);else throw new Error("Submission failed")}catch(m){console.error("Feedback submission failed:",m),L({message:"Failed to submit feedback. Check connection.",type:"error"}),setTimeout(()=>L(null),3e3)}};return e.jsxs("div",{className:"app min-h-screen relative",children:[R&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-xl shadow-2xl backdrop-blur-md border animate-fade-in ${R.type==="success"?"bg-green-500/20 border-green-500/30 text-green-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[R.type==="success"?e.jsx(ue,{className:"w-5 h-5"}):e.jsx(H,{className:"w-5 h-5"}),e.jsx("p",{className:"font-medium text-sm",children:R.message})]})}),e.jsx("header",{className:"header",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"logo-icon",children:e.jsx(ge,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-lg font-semibold text-white",children:"SirTrav A2A Studio"}),e.jsx("span",{className:"version-badge",children:W})]}),e.jsxs("nav",{className:"flex items-center gap-4",children:[e.jsxs("a",{href:"#",className:"nav-link",children:[e.jsx(pe,{className:"w-4 h-4"})," Documentation"]}),e.jsxs("a",{href:"#",className:"nav-link",children:[e.jsx(be,{className:"w-4 h-4"})," Vault Status"]}),e.jsx("button",{onClick:()=>n(!0),className:"btn-secondary",children:"Test Results Preview"}),e.jsx("a",{href:"https://github.com/WSP001/SirTrav-A2A-Studio",target:"_blank",rel:"noopener noreferrer",className:"nav-link",children:e.jsx(je,{className:"w-4 h-4"})})]})]})}),e.jsxs("section",{className:"hero-section",children:[e.jsxs("h1",{className:"hero-title",children:[e.jsx("span",{className:"text-brand-400",children:"D2A"})," Video Automation"]}),e.jsx("p",{className:"hero-subtitle",children:"Transform raw assets into cinematic stories using a 7-agent sequential pipeline. Built for the Commons Good."})]}),e.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx(q,{className:"w-5 h-5"})," Input Source"]}),l.length>0&&e.jsx("span",{className:"status-badge status-secured",children:"âœ“ ASSET SECURED"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Project ID / Job Ticket"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"#"}),e.jsx("input",{type:"text",value:s,onChange:t=>f(t.target.value),className:"input-field flex-1"})]})]}),e.jsx("div",{className:"drop-zone",onDrop:Z,onDragOver:t=>t.preventDefault(),children:l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{className:"w-8 h-8 text-gray-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:"Drag & drop assets here or click to upload"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Supports: .txt, .mp3, .mp4, .jpg"}),e.jsx("input",{type:"file",multiple:!0,onChange:Q,className:"hidden",id:"file-input"}),e.jsx("label",{htmlFor:"file-input",className:"btn-secondary mt-4 inline-block cursor-pointer",children:"Browse Files"})]}):e.jsx("div",{className:"space-y-2",children:l.map((t,m)=>e.jsxs("div",{className:"file-item",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ye,{className:"w-4 h-4 text-purple-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white truncate max-w-[200px]",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(t.size/1024).toFixed(1)," KB â€¢ Ready for Agents"]})]})]}),e.jsx("button",{onClick:()=>ee(m),className:"text-gray-500 hover:text-red-400",children:e.jsx(H,{className:"w-4 h-4"})})]},m))})}),e.jsxs("button",{onClick:()=>{j([new File(["(dummy content)"],"journal_entry_day1.txt",{type:"text/plain"}),new File(["(dummy content)"],"voice_memo_day1.mp3",{type:"audio/mpeg"}),new File(["(dummy content)"],"photo_day1.jpg",{type:"image/jpeg"})]),f(`week${new Date().getWeekNumber()}_recap_demo`)},className:"btn-template mt-4 w-full",children:[e.jsx("span",{children:"ðŸ“…"})," Use Weekly Recap Template"]})]}),e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx(B,{className:"w-4 h-4 text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Est. Cost"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:["$",P.cost.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-600",children:"Target: < $1.00"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx(he,{className:"w-4 h-4 text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Time"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:[P.time.toFixed(1),"s"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"P95: 180s"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx(xe,{className:"w-4 h-4 text-purple-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cost Distrib"}),e.jsx("div",{className:"flex gap-0.5 mt-1",children:[40,60,80,50,30,20,10].map((t,m)=>e.jsx("div",{className:"w-2 bg-amber-500 rounded-sm",style:{height:`${t}%`,maxHeight:"24px"}},m))})]})]})]})})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h2",{className:"section-title mb-6",children:"Agent Orchestration"}),o==="running"||o==="completed"?e.jsx(Ee,{projectId:s,runId:h,onComplete:ae,onError:re}):e.jsx("div",{className:"space-y-4",children:X.map(t=>e.jsx("div",{className:"agent-card pending",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"agent-icon pending",children:e.jsx("span",{className:"text-xl",children:t.icon})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-white",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.description})]})]})},t.id))}),e.jsxs("div",{className:`mt-6 p-4 rounded-xl border border-gray-700 transition-all ${l.length>0?"bg-gray-800/80":"bg-gray-800/40 opacity-75"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4 text-brand-400"}),"Click-to-Kick Launchpad"]}),l.length===0&&e.jsx("span",{className:"text-xs text-amber-500 animate-pulse",children:"Upload assets to unlock"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[[{id:"tiktok",label:"TikTok",icon:"ðŸŽµ",ratio:"9:16"},{id:"instagram",label:"Reels",icon:"ðŸ“¸",ratio:"9:16"},{id:"youtube_shorts",label:"Shorts",icon:"â–¶ï¸",ratio:"9:16"},{id:"linkedin",label:"LinkedIn",icon:"ðŸ’¼",ratio:"16:9"}].map(t=>e.jsxs("button",{onClick:()=>k(t.id),disabled:l.length===0||o==="running",className:`relative p-3 rounded-lg border text-left transition-all ${r===t.id?"bg-purple-900/60 border-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.2)]":"bg-gray-900/50 border-gray-700 hover:bg-gray-800"} ${l.length===0?"cursor-not-allowed grayscale opacity-50":"cursor-pointer"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{className:"text-[10px] font-mono text-gray-400 bg-black/40 px-1 rounded",children:t.ratio})]}),e.jsx("span",{className:`text-xs font-semibold block ${r===t.id?"text-white":"text-gray-400"}`,children:t.label}),r===t.id&&e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-purple-400 rounded-full animate-ping"})]},t.id)),e.jsxs("button",{onClick:()=>{r!=="twitter"&&(k("twitter"),l.length>0&&alert("ðŸ¦ X Mode Activated: Ready to post to @Sechols002!"))},disabled:l.length===0||o==="running",className:`relative p-3 rounded-lg border text-left transition-all group overflow-hidden ${r==="twitter"?"bg-[#1DA1F2]/20 border-[#1DA1F2] shadow-[0_0_15px_rgba(29,161,242,0.4)]":"bg-gray-900/50 border-gray-700 hover:border-[#1DA1F2]/50"} ${l.length===0?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-[#1DA1F2]/10 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),e.jsxs("div",{className:"flex items-center justify-between mb-1 relative z-10",children:[e.jsx("span",{className:"text-lg text-[#1DA1F2]",children:"ðŸ¦"}),e.jsx("span",{className:"text-[10px] font-mono text-[#1DA1F2]/70 bg-[#1DA1F2]/10 px-1 rounded",children:"16:9"})]}),e.jsx("span",{className:`text-xs font-bold block relative z-10 ${r==="twitter"?"text-[#1DA1F2]":"text-gray-400 group-hover:text-[#1DA1F2]"}`,children:"X (Twitter)"}),r==="twitter"&&e.jsx("div",{className:"absolute top-2 right-2 w-1.5 h-1.5 bg-[#1DA1F2] rounded-full animate-pulse shadow-[0_0_8px_#1DA1F2]"})]})]}),e.jsxs("div",{className:"mb-4 bg-black/20 p-3 rounded-lg border border-white/5 space-y-3",children:[e.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-wider block",children:"Creative Direction"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Voice Style"}),e.jsxs("select",{value:O,onChange:t=>Y(t.target.value),className:"w-full bg-gray-900 border border-gray-700 text-white text-xs rounded p-2 focus:ring-1 focus:ring-purple-500 outline-none",children:[e.jsx("option",{value:"serious",children:"ðŸ§ Serious"}),e.jsx("option",{value:"friendly",children:"ðŸ˜Š Friendly"}),e.jsx("option",{value:"hype",children:"âš¡ Hype"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Length"}),e.jsxs("select",{value:E,onChange:t=>K(t.target.value),className:"w-full bg-gray-900 border border-gray-700 text-white text-xs rounded p-2 focus:ring-1 focus:ring-purple-500 outline-none",children:[e.jsx("option",{value:"short",children:"Short (15s)"}),e.jsx("option",{value:"long",children:"Long (60s)"})]})]})]})]}),e.jsxs("div",{className:"mb-4 bg-black/20 p-2 rounded-lg border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-wider",children:"Audio Engine"}),e.jsx("span",{className:"text-[10px] text-gray-400",children:g==="suno"?"AI Generated (Requires API)":"Local File Fallback"})]}),e.jsxs("div",{className:"flex bg-gray-900 rounded p-0.5",children:[e.jsx("button",{onClick:()=>D("suno"),disabled:l.length===0,className:`flex-1 py-1.5 text-xs font-medium rounded transition-colors ${g==="suno"?"bg-indigo-600 text-white":"text-gray-500 hover:text-gray-300"}`,children:"Suno AI"}),e.jsx("button",{onClick:()=>D("manual"),disabled:l.length===0,className:`flex-1 py-1.5 text-xs font-medium rounded transition-colors ${g==="manual"?"bg-amber-600 text-white":"text-gray-500 hover:text-gray-300"}`,children:"Manual Mode"})]})]}),e.jsx("button",{onClick:te,disabled:l.length===0||o==="running",className:`w-full py-3 rounded-lg font-bold text-white text-sm flex items-center justify-center gap-2 transition-all transform active:scale-[0.98] ${o==="running"?"bg-gray-700 cursor-wait":l.length>0?"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-500 cursor-not-allowed border border-gray-700"}`,children:o==="running"?e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"w-4 h-4 animate-spin"}),"INITIALIZING AGENTS..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"w-4 h-4 fill-current"}),"LAUNCH ",r.replace("_"," ").toUpperCase()," AGENT"]})})]})]})]}),o==="completed"&&u&&e.jsxs("div",{className:"mt-8 glass-card p-6 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx(Te,{className:"w-5 h-5"})," Final Output"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`px-2 py-1 text-xs font-bold rounded ${u.pipelineMode==="FULL"?"bg-green-500/20 text-green-400":u.pipelineMode==="ENHANCED"?"bg-blue-500/20 text-blue-400":u.pipelineMode==="SIMPLE"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:[u.pipelineMode," MODE"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Generated: ",new Date(u.generatedAt).toLocaleString()]})]})]}),u.isPlaceholder&&e.jsx("div",{className:"mb-4 p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-400",children:[e.jsx("span",{className:"font-bold",children:"Demo Mode:"})," Showing test video. Configure API keys (ElevenLabs, Suno) for real video generation."]})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative aspect-video bg-black rounded-xl overflow-hidden",children:e.jsx("video",{src:u.videoUrl,controls:!0,poster:u.thumbnailUrl,className:"w-full h-full object-contain",preload:"metadata",children:"Your browser does not support video playback."})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Resolution"}),e.jsx("p",{className:"text-sm font-medium text-white",children:u.resolution})]}),e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Duration"}),e.jsx("p",{className:"text-sm font-medium text-white",children:u.duration})]}),e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"File Size"}),e.jsx("p",{className:"text-sm font-medium text-white",children:u.fileSize})]})]}),u.invoice&&e.jsxs("div",{className:"invoice-card",children:[e.jsxs("div",{className:"invoice-header",children:[e.jsxs("h4",{className:"invoice-title",children:[e.jsx(B,{className:"w-4 h-4"})," Cost Plus Invoice"]}),e.jsx("span",{className:"invoice-id",children:u.invoice.jobId})]}),e.jsxs("div",{className:"invoice-grid",children:[e.jsxs("div",{className:"invoice-cell invoice-cell-sub",children:[e.jsx("p",{className:"text-emerald-500/70",children:"Subtotal"}),e.jsxs("p",{className:"text-emerald-200 font-mono",children:["$",u.invoice.subtotal.toFixed(3)]})]}),e.jsxs("div",{className:"invoice-cell invoice-cell-sub",children:[e.jsx("p",{className:"text-emerald-500/70",children:"Markup (20%)"}),e.jsxs("p",{className:"text-emerald-200 font-mono",children:["$",u.invoice.markupTotal.toFixed(3)]})]}),e.jsxs("div",{className:"invoice-cell invoice-cell-total",children:[e.jsx("p",{className:"text-emerald-100 font-bold",children:"TOTAL"}),e.jsxs("p",{className:"text-white font-bold font-mono",children:["$",u.invoice.totalDue.toFixed(3)]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 p-4 bg-white/5 rounded-xl",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Rate this output:"}),e.jsxs("button",{onClick:()=>U("good"),className:"flex items-center gap-2 px-4 py-2 bg-green-500/20 hover:bg-green-500/30 border border-green-500/30 rounded-lg text-green-400 transition-colors",children:[e.jsx(Me,{className:"w-4 h-4"})," Good"]}),e.jsxs("button",{onClick:()=>U("bad"),className:"flex items-center gap-2 px-4 py-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded-lg text-red-400 transition-colors",children:[e.jsx(Ae,{className:"w-4 h-4"})," Bad"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-white",children:"Publishing Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Visibility"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>v("private"),className:`p-3 rounded-lg border transition-all flex flex-col items-center gap-1 ${T==="private"?"bg-brand-500/20 border-brand-500":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[e.jsx(Se,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Private"})]}),e.jsxs("button",{onClick:()=>v("unlisted"),className:`p-3 rounded-lg border transition-all flex flex-col items-center gap-1 ${T==="unlisted"?"bg-brand-500/20 border-brand-500":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Unlisted"})]}),e.jsxs("button",{onClick:()=>v("public"),className:`p-3 rounded-lg border transition-all flex flex-col items-center gap-1 ${T==="public"?"bg-brand-500/20 border-brand-500":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Public"})]})]})]}),e.jsxs("a",{href:u.videoUrl,download:`${s}-video.mp4`,className:"w-full flex items-center justify-center gap-3 p-4 bg-gradient-to-r from-brand-500 to-accent-purple rounded-xl text-white font-medium hover:opacity-90 transition-opacity cursor-pointer",children:[e.jsx(fe,{className:"w-5 h-5"}),"Download Video (",u.fileSize,")"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Publish to Social Media"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{className:"social-btn youtube",children:[e.jsx(Fe,{className:"w-5 h-5"}),e.jsx("span",{children:"YouTube"}),e.jsx(_,{className:"w-3 h-3 ml-auto opacity-50"})]}),e.jsxs("button",{className:"social-btn tiktok",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“±"}),e.jsx("span",{children:"TikTok"}),e.jsx(_,{className:"w-3 h-3 ml-auto opacity-50"})]}),e.jsxs("button",{className:"social-btn instagram",children:[e.jsx(Ne,{className:"w-5 h-5"}),e.jsx("span",{children:"Instagram"}),e.jsx(_,{className:"w-3 h-3 ml-auto opacity-50"})]}),e.jsxs("button",{className:"social-btn twitter",children:[e.jsx(De,{className:"w-5 h-5"}),e.jsx("span",{children:"X (Twitter)"}),e.jsx(_,{className:"w-3 h-3 ml-auto opacity-50"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:`https://sirtrav.studio/v/${s}`,className:"input-field flex-1 text-sm"}),e.jsx("button",{className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-sm transition-colors",children:"Copy"})]}),e.jsxs("div",{className:"p-3 bg-teal-500/10 border border-teal-500/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-teal-400 text-sm",children:[e.jsx("span",{children:"ðŸ“œ"}),e.jsx("span",{children:"Commons Good Attribution included"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All media sources properly credited in video description"})]})]})]})]})]}),e.jsxs("footer",{className:"text-center py-6 text-xs text-gray-600",children:["Build: ",Re," | ",W," | For the Commons Good ðŸŒ"]}),b&&e.jsx($e,{result:{videoUrl:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",projectId:"test-project-123",runId:"ui-demo-run",metadata:{duration:154,resolution:"1080p",platform:"TikTok",fileSize:245e5},credits:{music:"Suno AI",voice:"ElevenLabs",platform:"SirTrav A2A Studio"}},onClose:()=>n(!1),onFeedback:async(t,m,i)=>{try{const S=await fetch("/.netlify/functions/submit-evaluation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:t,runId:h||"ui-demo",rating:m,feedback:i})});if(!S.ok){const z=await S.text();throw new Error(`submit-evaluation failed (${S.status}): ${z}`)}}catch(S){console.error("Feedback submit failed",S),alert("Failed to submit feedback. Please try again.")}}})]})}Date.prototype.getWeekNumber=function(){const s=new Date(Date.UTC(this.getFullYear(),this.getMonth(),this.getDate())),f=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-f);const l=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s-l)/864e5+1)/7)};ce.createRoot(document.getElementById("root")).render(e.jsx(J.StrictMode,{children:e.jsx(Le,{})}));
//# sourceMappingURL=index-tOjUWyqp.js.map
